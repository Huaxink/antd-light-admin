(this["webpackJsonpantd-app"]=this["webpackJsonpantd-app"]||[]).push([[1],{529:function(e,t,n){},531:function(e,t,n){"use strict";function a(e){var t=e.props,n=w.a.useForm(),a=Object(b.a)(n,1)[0],l=t.parent;return t.parent.staffFrom=a,S.a.createElement(w.a,{labelCol:{span:11},form:a,wrapperCol:{span:13},name:"shopForm",validateMessages:{required:"\u5fc5\u586b\u9879!",string:{min:"\u5bc6\u7801\u81f3\u5c116\u4f4d"}}},S.a.createElement(w.a.Item,{name:"password",label:"\u8bf7\u8f93\u5165\u5f53\u524d\u767b\u5f55\u5bc6\u7801",rules:[{required:!0},{min:6}]},S.a.createElement(C.a.Password,null)),S.a.createElement(w.a.Item,{name:"new_password",label:"\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801",rules:[{required:!0},{min:6}]},S.a.createElement(C.a.Password,null)),S.a.createElement(w.a.Item,{name:"copy_newPassword",label:"\u8bf7\u518d\u6b21\u8f93\u5165\u65b0\u5bc6\u7801",rules:[{required:!0},{min:6}]},S.a.createElement(C.a.Password,null)),S.a.createElement(w.a.Item,{wrapperCol:{span:13,offset:11}},S.a.createElement("div",{className:"text-right"},S.a.createElement(k.a,{type:"default",onClick:function(){return l.cancelPassword()}},"\u53d6\u6d88"),S.a.createElement(k.a,{type:"primary",onClick:function(){return l.confirmChangePassword()},className:"ml10"},"\u786e\u5b9a"))))}n.r(t),n(237);var l,o=n(122),r=(n(108),n(61)),i=(n(515),n(513)),s=(n(235),n(202)),u=(n(509),n(512)),c=(n(510),n(516)),p=(n(511),n(514)),m=(n(234),n(201)),f=n(172),h=n(119),d=n(36),y=n(37),v=n(47),E=n(46),k=(n(53),n(12)),C=(n(236),n(166)),w=(n(238),n(95)),b=n(167),g=(n(233),n(200)),I=n(0),S=n.n(I),V=(n(529),n(526)),_=n(527),R=n(517),P=n(101),O=g.a.confirm,N=Object(P.b)("appStore")(l=Object(P.c)(l=function(e){Object(v.a)(n,e);var t=Object(E.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).shopStore=e.appStore.shopInfo,a.state={shopInfo:null,loading:!1,inputTypeVisible:!1,inputTypeValue:"",inputColorVisible:!1,inputColorValue:"",inputKindVisible:!1,inputKindValue:"",staffList:[],curStaff:{},showStaffModel:!1,showRole:!1,cloumns:[{title:"\u767b\u5f55\u8d26\u53f7",dataIndex:"username",align:"center"},{title:"\u5458\u5de5\u59d3\u540d",dataIndex:"staff_name",align:"center",render:function(e,t){return S.a.createElement("div",null,S.a.createElement("span",{className:"mr5"},e),S.a.createElement(k.a,{type:"link",size:"small",onClick:function(){return a.handleChangeName(t)}},S.a.createElement(V.a,null)))}},{title:"\u89d2\u8272",dataIndex:"role_name",align:"center"},{title:"\u8d26\u53f7\u72b6\u6001",dataIndex:"status",align:"center"},{title:"\u64cd\u4f5c",dataIndex:"option",render:function(e,t){return S.a.createElement("div",null,S.a.createElement(k.a,{size:"small",type:"link",onClick:function(){return a.showRoleModal(t)}},"\u4fee\u6539\u89d2\u8272\uff0c\u6d4b\u8bd5\u6743\u9650"),S.a.createElement(k.a,{size:"small",type:"link",onClick:function(){return a.showRoleModal(t)}},"\u4fee\u6539\u5bc6\u7801"))}}]},a}return Object(y.a)(n,[{key:"getShopInfo",value:function(){this.setState({shopInfo:{create_time:"2019-02-01",show_cdata:1,required_from:0,required_contract:0,kinds:[],colors:[],types:[]}})}},{key:"showRoleModal",value:function(e){var t=this.props.appStore.role;this.setState({curStaff:Object(h.a)({},e,{role:t}),showRole:!0})}},{key:"showPasswordModal",value:function(e){this.setState({curStaff:Object(h.a)({},e),showStaffModel:!0})}},{key:"getStaffList",value:function(){var e=this.props.appStore.role;this.setState({staffList:[{id:1,key:1,staff_name:"\u5c0f\u54c8\u54c8",username:"xhh",role_name:"\u7ba1\u7406\u5458",status:"\u6b63\u5e38",role:e}]})}},{key:"handleChangeSwitch",value:function(e,t){var n=this.state.shopInfo;n[e]!==t&&this.setState({shopInfo:Object(h.a)({},n,Object(f.a)({},e,t))})}},{key:"handleChangeName",value:function(e){var t=Object(h.a)({},e),n=S.a.createElement("div",null,S.a.createElement(C.a,{type:"text",style:{width:200},defaultValue:t.staff_name,onChange:function(e){var n=e||window.event,a=n.target||n.srcElement;t.staff_name=a.value}}));O({title:"\u66f4\u6539\u5458\u5de5\u540d\u5b57\uff01",icon:S.a.createElement(_.a,null),maskClosable:!0,content:n})}},{key:"confirmChangePassword",value:function(){var e=this;this.staffFrom.validateFields().then((function(t){var n=t.password,a=t.new_password;if(a!==t.copy_newPassword)return m.a.error("\u786e\u8ba4\u5bc6\u7801\u548c\u65b0\u5bc6\u7801\u4e0d\u4e00\u81f4");n&&a&&e.cancelPassword()}))}},{key:"cancelPassword",value:function(){this.setState({showStaffModel:!1})}},{key:"handleRemoveProp",value:function(e,t){var n=this,a=t["".concat(e,"_name")],l=this.state.shopInfo;O({title:"\u5220\u9664\u63d0\u9192",content:"\u786e\u8ba4\u5220\u9664\u3010".concat(a,"\u3011?"),onOk:function(){n.setState({loading:!0}),setTimeout((function(){var a="".concat(e,"s"),o="".concat(e,"_name");l[a]=l[a].filter((function(e){return e[o]!==t[o]})),n.setState({loading:!1,shopInfo:Object(h.a)({},l)})}),1e3)}})}},{key:"showInput",value:function(e){var t=this;"type"===e&&this.setState({inputTypeVisible:!0,inputTypeValue:""},(function(){return t.typeInput.focus()})),"color"===e&&this.setState({inputColorVisible:!0,inputColorValue:""},(function(){return t.colorInput.focus()})),"kind"===e&&this.setState({inputKindVisible:!0,inputKindValue:""},(function(){return t.kindInput.focus()}))}},{key:"handleInputChange",value:function(e,t){var n=e||window.event,a=n.target||n.srcElement,l=a.value?a.value.trim():"";"type"===t&&this.setState({inputTypeValue:l}),"color"===t&&this.setState({inputColorValue:l}),"kind"===t&&this.setState({inputKindValue:l})}},{key:"handleInputBlur",value:function(e){"type"===e&&this.setState({inputTypeVisible:!1,inputTypeValue:""}),"color"===e&&this.setState({inputColorVisible:!1,inputColorValue:""}),"kind"===e&&this.setState({inputKindVisible:!1,inputKindValue:""})}},{key:"handleInputConfirm",value:function(e){var t=this.state,n=t.shopInfo,a=t.inputTypeValue,l=t.inputColorValue,o=t.inputKindValue;"type"===e&&n.types.push({type_name:a}),"color"===e&&n.colors.push({color_name:l}),"kind"===e&&n.kinds.push({kind_name:o}),this.setState({shopInfo:n}),this.handleInputBlur(e)}},{key:"onChangeRole",value:function(e){var t=e.target.value,n=this.state.curStaff;n.role=t,this.setState({curStaff:n})}},{key:"confirmChangeRole",value:function(){var e=this,t=this.state.curStaff,n=this.props.appStore;n.changeRole(t.role),this.setState({showRole:!1,loading:!0}),setTimeout((function(){m.a.success(t.role?"\u6743\u9650\u9875\u6709\u4e86":"\u6743\u9650\u9875\u6ca1\u4e86"),n.changeRole(t.role),e.setState({loading:!1})}),500)}},{key:"cancelChangeRole",value:function(){this.setState({showRole:!1})}},{key:"componentDidMount",value:function(){this.getShopInfo(),this.getStaffList()}},{key:"render",value:function(){var e=this,t=this.state,n=t.shopInfo,l=t.loading,m=t.inputTypeVisible,f=t.inputTypeValue,h=t.inputColorVisible,d=t.inputColorValue,y=t.inputKindVisible,v=t.inputKindValue,E=t.curStaff,k=t.showStaffModel,w=t.cloumns,b=t.staffList,I=t.showRole;return n?S.a.createElement("div",{className:"setting-content"},S.a.createElement(r.a,{spinning:l},S.a.createElement("h1",null,n.shop_name),S.a.createElement(c.a,{title:"\u5e97\u94fa\u8bbe\u7f6e",bordered:!0,size:"small",className:"in-title"},S.a.createElement(c.a.Item,{label:"\u521b\u5efa\u65f6\u95f4"},n.create_time),S.a.createElement(c.a.Item,{label:"\u662f\u5426\u5141\u8bb8\u9500\u552e\u5458\u67e5\u770b\u3010\u5ba2\u6237\u5217\u8868\u3011"},S.a.createElement(u.a,{checkedChildren:"\u662f",unCheckedChildren:"\u5426",checked:!!n.show_cdata,onChange:function(t){return e.handleChangeSwitch("show_cdata",t?1:0)}})),S.a.createElement(c.a.Item,{label:"\u3010\u5408\u540c\u7f16\u53f7\u3011\u662f\u5426\u5fc5\u586b"},S.a.createElement(u.a,{checkedChildren:"\u662f",unCheckedChildren:"\u5426",checked:!!n.required_contract,onChange:function(t){return e.handleChangeSwitch("required_contract",t?1:0)}}))),S.a.createElement(c.a,{title:"\u5e97\u94fa\u5c5e\u6027",bordered:!0,size:"small",column:1,className:"in-title"},S.a.createElement(c.a.Item,{label:"\u7c7b\u578b"},n.types.map((function(t,n){return S.a.createElement("span",{key:n,style:{display:"inline-block"}},S.a.createElement(s.a,{className:"prop-item",closable:!0,onClose:function(n){n.preventDefault(),e.handleRemoveProp("type",t)}},t.type_name))})),m&&S.a.createElement(C.a,{ref:function(t){return e.typeInput=t},type:"text",size:"small",style:{width:88},value:f,onChange:function(t){return e.handleInputChange(t,"type")},onBlur:function(){return e.handleInputBlur("type")},onPressEnter:function(){return e.handleInputConfirm("type")}}),!m&&S.a.createElement(s.a,{onClick:function(){return e.showInput("type")},className:"site-tag-plus"},S.a.createElement(R.a,null)," ","\u6dfb\u52a0\u7c7b\u578b")),S.a.createElement(c.a.Item,{label:"\u989c\u8272"},n.colors.map((function(t,n){return S.a.createElement("span",{key:n,style:{display:"inline-block"}},S.a.createElement(s.a,{className:"prop-item",closable:!0,onClose:function(n){n.preventDefault(),e.handleRemoveProp("color",t)}},t.color_name))})),h&&S.a.createElement(C.a,{ref:function(t){return e.colorInput=t},type:"text",size:"small",style:{width:88},value:d,onChange:function(t){return e.handleInputChange(t,"color")},onBlur:function(){return e.handleInputBlur("color")},onPressEnter:function(){return e.handleInputConfirm("color")}}),!h&&S.a.createElement(s.a,{onClick:function(){return e.showInput("color")},className:"site-tag-plus"},S.a.createElement(R.a,null)," ","\u6dfb\u52a0\u989c\u8272")),S.a.createElement(c.a.Item,{label:"\u6b3e\u5f0f"},n.kinds.map((function(t,n){return S.a.createElement("span",{key:n,style:{display:"inline-block"}},S.a.createElement(s.a,{className:"prop-item",closable:!0,onClose:function(n){n.preventDefault(),e.handleRemoveProp("kind",t)}},t.kind_name))})),y&&S.a.createElement(C.a,{ref:function(t){return e.kindInput=t},type:"text",size:"small",style:{width:88},value:v,onChange:function(t){return e.handleInputChange(t,"kind")},onBlur:function(){return e.handleInputBlur("kind")},onPressEnter:function(){return e.handleInputConfirm("kind")}}),!y&&S.a.createElement(s.a,{onClick:function(){return e.showInput("kind")},className:"site-tag-plus"},S.a.createElement(R.a,null)," ","\u6dfb\u52a0\u6b3e\u5f0f"))),S.a.createElement("div",{className:"title"},"\u5458\u5de5\u7ba1\u7406"),S.a.createElement(i.a,{columns:w,dataSource:b,bordered:!0,size:"small",className:"mt10",pagination:!1})),S.a.createElement(g.a,{footer:!1,visible:k,width:600,destroyOnClose:!0,closable:!1,maskClosable:!0,title:"\u4fee\u6539\u3010".concat(E.staff_name,"\u3011\u767b\u5f55\u5bc6\u7801")},S.a.createElement(a,{props:{parent:this}})),S.a.createElement(g.a,{title:"\u4fee\u6539\u3010".concat(E.staff_name,"\u3011\u89d2\u8272"),visible:I,destroyOnClose:!0,closable:!1,maskClosable:!0,onOk:function(){return e.confirmChangeRole()},onCancel:function(){return e.cancelChangeRole()}},S.a.createElement(o.a.Group,{onChange:function(t){return e.onChangeRole(t)},value:E.role},S.a.createElement(o.a,{value:0},"\u666e\u5de5"),S.a.createElement(o.a,{value:1},"\u7ba1\u7406\u5458")))):S.a.createElement("div",null,S.a.createElement(p.a,{active:!0}),S.a.createElement(p.a,{active:!0}),S.a.createElement(p.a,{active:!0}))}}]),n}(I.Component))||l)||l;t.default=N}}]);